<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hyperfov: Page Previews</title>

    <link rel="stylesheet" href="styles.css" />

    <style id="all-popovers">
      .hyperfov-preview-element-wrapper {
        box-shadow: 8px 12px 0px #000000a8;
      }
    </style>
  </head>

  <body>
    <article>
      <p id="top">
        <img id="icon" src="icon.png" /><span
          ><b>Hyperfov:</b> <span>Page Previews</span></span
        >
      </p>
      <h1>Page previews are great!</h1>
      <p>
        <a href="https://www.mediawiki.org/wiki/Page_Previews">Page previews</a>
        are fantastic little piece of interactivity; they give insight into
        where a link leads before you click it. From poorly formed
        <a href="https://www.nngroup.com/articles/writing-links/">link text</a>
        to sketchy URLs, there's plenty of reasons a bit more information might
        help before clicking into a new link. Outside of a few sites like
        <a
          href="https://diff.wikimedia.org/2018/04/18/how-we-designed-page-previews-for-wikipedia/"
          >Wikipedia</a
        >, Github, and Twitter that have implemented previews for internal
        links, they're relatively rare.
      </p>

      <h2>Towards global previews</h2>

      <p>
        One key challenge—and why you likely don't often see previews for
        arbitrary links on webpages—is that fetching dynamic content from a
        different domain is
        <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"
          >impossible from the browser</a
        >.
      </p>
      <p>
        This approach is to deploy a small serverless function that does the
        work of requesting each link and sends the metadata back to the client.
        A script embedded in the page extracts links, sends them to the worker,
        then adds the preview popups when hovered.
      </p>

      <img
        src="diagram.png"
        alt="The webpage requests that the worker fetch the linked page, which the worker does and sends back to the webpage so it can display a page preview."
      />

      <p>
        This is some text about a variety of topics.
        <a href="https://futureland.tv">Links to <i>pages</i></a> are scattered
        <a href="https://classicinterfaces.com">throughout</a>.
      </p>

      <a class="blocky" href="https://classicinterfaces.com">
        <div class="large-block">
          <p>This is a large blockish link.</p>
        </div>
      </a>
    </article>

    <script defer>
      import("../dist/index.js").then(() => {
        setPagePreviews({
          workerUrl: "http://localhost:8787",
          styles: document.getElementById("all-popovers").sheet,
          assignPositions: (aElt) => {
            if (aElt.classList.contains("blocky")) return "cursor";
            else return "below";
          },
        });
      });
    </script>
  </body>
</html>
