<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hyperfov: Page Previews</title>

    <link rel="stylesheet" href="styles.css" />

    <style id="all-popovers">
      .hyperfov-preview-element-wrapper {
        box-shadow: 8px 12px 0px #000000a8;
      }
    </style>
    <style id="futureland-popover">
      .hyperfov-preview-element-wrapper {
        box-shadow: 4px 4px 12px #525252a8;
        border-radius: 10px;
        border: 1px solid grey;
        background-color: black;
        color: white;
      }
      .hyperfov-link-content {
        background-color: black;
      }

      .hyperfov-link-content::after {
        background-image: linear-gradient(#ffffff00, #000000);
      }

      .hyperfov-loading {
        background-color: white;
      }
    </style>
    <meta
      name="description"
      content="Global linked page previews for the web. Hyperfov page previews can be added to any page and create rich previews of linked pages."
    />
    <meta property="og:image" content="preview.png" />
  </head>

  <body>
    <article>
      <p id="top">
        <img id="icon" src="icon.png" /><span
          ><b>Hyperfov:</b> <span>Page Previews</span></span
        >
      </p>
      <h1>Page previews everywhere</h1>
      <img id="header-img" src="many.png" alt="Lots of page previews." />

      <p>
        <a href="https://www.mediawiki.org/wiki/Page_Previews">Page previews</a>
        are fantastic little piece of interactivity; they give insight into
        where a link leads before you click it. From poorly formed
        <a href="https://www.nngroup.com/articles/writing-links/">link text</a>
        to sketchy URLs, there's plenty of reasons a bit more information might
        help before clicking into a new link. Outside of a few sites like
        <a
          href="https://diff.wikimedia.org/2018/04/18/how-we-designed-page-previews-for-wikipedia/"
          >Wikipedia</a
        >, <a href="https://github.blog/2018-03-22-user-hovercards/">Github</a>,
        and
        <a
          href="https://blog.twitter.com/en_us/a/2010/flying-around-with-hovercards"
          >Twitter</a
        >
        that have implemented previews for internal links, they're relatively
        rare.
      </p>

      <h2>Towards global previews</h2>

      <p>
        One key challenge—and why you likely don't often see previews for
        arbitrary links on webpages—is that fetching dynamic content from a
        different domain is
        <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"
          >impossible from the browser</a
        >.
      </p>

      <p>
        To get around this problem, Hyperfov page previews use a small
        serverless function that does the work of requesting each link on behalf
        of the client. A script embedded in the page extracts links, sends them
        to the worker, then adds the preview popups when hovered.
      </p>

      <img
        src="diagram.png"
        alt="The webpage requests that the worker fetch the linked page, which the worker does and sends back to the webpage so it can display a page preview."
      />

      <p>
        This structure brings us closer to the goal of global page previews; now
        any arbitrary link on a page can be turned into a rich preview when
        hovered thanks to a helpful worker off-client.
      </p>

      <h2>This package</h2>

      <p>Hyperfov page previews are composed of two components:</p>
      <ul>
        <li>
          A script that inserts page previews on a webpage, written as a
          <a href="https://svelte.dev">Svelte</a>
          <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components"
            >web component</a
          >.
        </li>
        <li>
          A serverless worker function that fetches and serves the links' meta
          information, deployable on
          <a href="https://workers.cloudflare.com/">Cloudflare Workers</a>.
        </li>
      </ul>

      <p>
        More details are available on the
        <a href="https://github.com/cbroms/hyperfov-page-previews"
          >project's repository</a
        >.
      </p>

      <h3>Style</h3>

      <p>
        Of course, these page previews should feel integrated on any page. Every
        element in the preview popup can be styled with custom rules:
      </p>

      <div class="blocks">
        <a class="blocky" href="https://classicinterfaces.com">
          <p>Hover for default style.</p>
        </a>
        <a class="blocky" href="https://futureland.tv">
          <p>Hover for a link with custom style.</p>
        </a>
      </div>

      <p>
        Find more information about styling in the
        <a href="https://github.com/cbroms/hyperfov-page-previews#configuration"
          >project's documentation</a
        >
      </p>

      <h3>About</h3>

      <p>
        <a href="https://christianbroms.com">I</a> built this project as part of
        my <a href="https://twelvewebsites.com">Twelve Websites</a> project. I'm
        currently integrating it into my other sites and will be making
        adjustments as needed. Find a list of the improvements I'm planning on
        making
        <a href="https://onedimension.net/thought/hyperfov-page-previews-todo"
          >here</a
        >.
      </p>
    </article>

    <script defer>
      import("./js/hyperfov-link-previews.min.js").then(() => {
        setPagePreviews({
          workerUrl: "https://preview-worker.hyperfov.com",
          assignStyles: (aElt) => {
            if (aElt.href.indexOf("futureland.tv") !== -1)
              return document.getElementById("futureland-popover").sheet;
            else return document.getElementById("all-popovers").sheet;
          },
          assignPositions: (aElt) => {
            if (aElt.classList.contains("blocky")) return "cursor";
            else return "below";
          },
        });
      });
    </script>
  </body>
</html>
