!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).HyperfovLinkPreviews={})}(this,(function(t){"use strict";function e(){}const n=t=>t;function o(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(o)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c;function u(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function a(t){return 0===Object.keys(t).length}function d(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}const f="undefined"!=typeof window;let h=f?()=>window.performance.now():()=>Date.now(),p=f?t=>requestAnimationFrame(t):e;const g=new Set;function m(t){g.forEach((e=>{e.c(t)||(g.delete(e),e.f())})),0!==g.size&&p(m)}function $(t,e){t.appendChild(e)}function y(t,e,n){const o=w(t);if(!o.getElementById(e)){const t=C("style");t.id=e,t.textContent=n,v(o,t)}}function w(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function v(t,e){$(t.head||t,e)}function b(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function C(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function _(){return k(" ")}function A(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function I(t,e,n){t.classList[n?"add":"remove"](e)}function N(t){const e={};for(const n of t)e[n.name]=n.value;return e}const O=new Set;let P,L=0;function R(t,e,n,o,r,i,s,l=0){const c=16.666/o;let u="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*i(t);u+=100*t+`%{${s(o,1-o)}}\n`}const a=u+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${l}`,f=w(t);O.add(f);const h=f.__svelte_stylesheet||(f.__svelte_stylesheet=function(t){const e=C("style");return v(w(t),e),e}(t).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[d]||(p[d]=!0,h.insertRule(`@keyframes ${d} ${a}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${r}ms 1 both`,L+=1,d}function T(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),L-=r,L||p((()=>{L||(O.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),O.clear())})))}function j(t){P=t}const M=[],F=[],B=[],D=[],U=Promise.resolve();let z=!1;function J(t){B.push(t)}let H=!1;const W=new Set;function Y(){if(!H){H=!0;do{for(let t=0;t<M.length;t+=1){const e=M[t];j(e),X(e.$$)}for(j(null),M.length=0;F.length;)F.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];W.has(e)||(W.add(e),e())}B.length=0}while(M.length);for(;D.length;)D.pop()();z=!1,H=!1,W.clear()}}function X(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}let q;function Z(t,e,n){t.dispatchEvent(function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(`${e?"intro":"outro"}${n}`))}const G=new Set;let K;function Q(){K={r:0,c:[],p:K}}function V(){K.r||i(K.c),K=K.p}function tt(t,e){t&&t.i&&(G.delete(t),t.i(e))}function et(t,e,n,o){if(t&&t.o){if(G.has(t))return;G.add(t),K.c.push((()=>{G.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const nt={duration:0};function ot(t,o,r,l){let c=o(t,r),u=l?0:1,a=null,d=null,f=null;function $(){f&&T(t,f)}function y(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function w(o){const{delay:r=0,duration:s=300,easing:l=n,tick:w=e,css:v}=c||nt,b={start:h()+r,b:o};o||(b.group=K,K.r+=1),a||d?d=b:(v&&($(),f=R(t,u,o,s,r,l,v)),o&&w(0,1),a=y(b,s),J((()=>Z(t,o,"start"))),function(t){let e;0===g.size&&p(m),new Promise((n=>{g.add(e={c:t,f:n})}))}((e=>{if(d&&e>d.start&&(a=y(d,s),d=null,Z(t,a.b,"start"),v&&($(),f=R(t,u,a.b,a.duration,0,l,c.css))),a)if(e>=a.end)w(u=a.b,1-u),Z(t,a.b,"end"),d||(a.b?$():--a.group.r||i(a.group.c)),a=null;else if(e>=a.start){const t=e-a.start;u=a.a+a.d*l(t/a.duration),w(u,1-u)}return!(!a&&!d)})))}return{run(t){s(c)?(q||(q=Promise.resolve(),q.then((()=>{q=null}))),q).then((()=>{c=c(),w(t)})):w(t)},end(){$(),a=d=null}}}function rt(t){t&&t.c()}function it(t,e,n,r){const{fragment:l,on_mount:c,on_destroy:u,after_update:a}=t.$$;l&&l.m(e,n),r||J((()=>{const e=c.map(o).filter(s);u?u.push(...e):i(e),t.$$.on_mount=[]})),a.forEach(J)}function st(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){-1===t.$$.dirty[0]&&(M.push(t),z||(z=!0,U.then(Y)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ct(t,n,o,s,l,c,u,a=[-1]){const d=P;j(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:r(),dirty:a,skip_bound:!1,root:n.target||d.$$.root};u&&u(f.root);let h=!1;if(f.ctx=o?o(t,n.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=r)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](r),h&&lt(t,e)),n})):[],f.update(),h=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(x)}else f.fragment&&f.fragment.c();n.intro&&tt(t.$$.fragment),it(t,n.target,n.anchor,n.customElement),Y()}j(d)}let ut;"function"==typeof HTMLElement&&(ut=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(o).filter(s);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){i(this.$$.on_disconnect)}$destroy(){st(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class at{$destroy(){st(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function dt(t){y(t,"svelte-v3u9b1",".preview.svelte-v3u9b1{z-index:1000;position:absolute;transition:opacity 0.5s;visibility:hidden;opacity:0}.preview.visible.svelte-v3u9b1{opacity:1;visibility:visible}.hyperfov-preview-element-wrapper.svelte-v3u9b1{font-family:sans-serif;color:black;max-width:100%;text-decoration:none;padding:10px;margin-top:5px;font-weight:normal;font-style:normal;font-size:14px;border:1px solid black;background-color:white}")}function ft(t){let e,n,o;const r=t[11].default,i=function(t,e,n,o){if(t){const r=d(t,e,n,o);return t[0](r)}}(r,t,t[10],null);return{c(){e=C("div"),n=C("div"),i&&i.c(),A(n,"class","hyperfov-preview-element-wrapper svelte-v3u9b1"),A(e,"class","preview svelte-v3u9b1"),E(e,"top",t[2]+"px"),E(e,"left",t[3]+"px"),E(e,"height",t[4]+"px"),E(e,"width",t[5]+"px"),A(e,"id",t[0]),I(e,"visible",t[1])},m(t,r){b(t,e,r),$(e,n),i&&i.m(n,null),o=!0},p(t,[n]){i&&i.p&&(!o||1024&n)&&function(t,e,n,o,r,i){if(r){const s=d(e,n,o,i);t.p(s,r)}}(i,r,t,t[10],o?function(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}(r,t[10],n,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[10]),null),(!o||4&n)&&E(e,"top",t[2]+"px"),(!o||8&n)&&E(e,"left",t[3]+"px"),(!o||16&n)&&E(e,"height",t[4]+"px"),(!o||32&n)&&E(e,"width",t[5]+"px"),(!o||1&n)&&A(e,"id",t[0]),2&n&&I(e,"visible",t[1])},i(t){o||(tt(i,t),o=!0)},o(t){et(i,t),o=!1},d(t){t&&x(e),i&&i.d(t)}}}function ht(t,e,n){let o,r,i,s,{$$slots:l={},$$scope:c}=e,{showContent:u}=e,{showImg:a}=e,{eltPos:d}=e,{id:f}=e,{followCursor:h}=e,p=!1;const g=()=>{if(d){const t=s+40,e=i+40,l=window.innerWidth,c=window.innerHeight;l-d.x<t?n(3,r=l-t+window.scrollX):n(3,r=d.x+window.scrollX);const u=h?d.y+20:d.bottom;n(2,o=c-u<e?d.y-i-20+window.scrollY:u+window.scrollY)}};return t.$$set=t=>{"showContent"in t&&n(6,u=t.showContent),"showImg"in t&&n(7,a=t.showImg),"eltPos"in t&&n(8,d=t.eltPos),"id"in t&&n(0,f=t.id),"followCursor"in t&&n(9,h=t.followCursor),"$$scope"in t&&n(10,c=t.$$scope)},t.$$.update=()=>{192&t.$$.dirty&&(n(4,i=u||a?172:60),n(5,s=u&&a?400:272),g()),256&t.$$.dirty&&(d?(n(1,p=!0),g()):n(1,p=!1))},[f,p,o,r,i,s,u,a,d,h,c,l]}class pt extends at{constructor(t){super(),ct(this,t,ht,ft,l,{showContent:6,showImg:7,eltPos:8,id:0,followCursor:9},dt)}}function gt(t){return t*t*t}function mt(t){const e=t-1;return e*e*e+1}function $t(t,{delay:e=0,duration:n=400,easing:o=mt}={}){const r=getComputedStyle(t),i=+r.opacity,s=parseFloat(r.height),l=parseFloat(r.paddingTop),c=parseFloat(r.paddingBottom),u=parseFloat(r.marginTop),a=parseFloat(r.marginBottom),d=parseFloat(r.borderTopWidth),f=parseFloat(r.borderBottomWidth);return{delay:e,duration:n,easing:o,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*i};height: ${t*s}px;padding-top: ${t*l}px;padding-bottom: ${t*c}px;margin-top: ${t*u}px;margin-bottom: ${t*a}px;border-top-width: ${t*d}px;border-bottom-width: ${t*f}px;`}}function yt(t){y(t,"svelte-1edsy5l",'.hyperfov-link-title.svelte-1edsy5l{font-weight:bold}.hyperfov-link-content-wrapper.svelte-1edsy5l{display:flex;margin-bottom:15px}.hyperfov-link-image.svelte-1edsy5l{height:120px;object-fit:cover;object-position:center center;width:100%;min-width:150px}.hyperfov-link-image.left.svelte-1edsy5l{padding-left:10px}.hyperfov-link-url.svelte-1edsy5l{font-size:12px;color:grey;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.hyperfov-link-content.svelte-1edsy5l{display:inline-block;position:relative;height:120px;overflow:hidden;background-color:white}.hyperfov-link-content.svelte-1edsy5l::after{content:"";position:absolute;bottom:0;left:0;width:275px;height:50px;background-image:linear-gradient(#ffffff00, #ffffff)}.hyperfov-loading.svelte-1edsy5l{width:5px;height:5px;background-color:black;border-radius:50%;animation:svelte-1edsy5l-fade 1s ease infinite;margin-bottom:2px;display:inline-block}@keyframes svelte-1edsy5l-fade{from{opacity:1}to{opacity:0.1}}')}function wt(t){let e,n,o,r,i=t[0]&&vt(t),s=t[1]&&xt(t);return{c(){e=C("div"),i&&i.c(),n=_(),s&&s.c(),A(e,"class","hyperfov-link-content-wrapper svelte-1edsy5l")},m(t,o){b(t,e,o),i&&i.m(e,null),$(e,n),s&&s.m(e,null),r=!0},p(o,r){(t=o)[0]?i?i.p(t,r):(i=vt(t),i.c(),i.m(e,n)):i&&(i.d(1),i=null),t[1]?s?s.p(t,r):(s=xt(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(t){r||(J((()=>{o||(o=ot(e,$t,{duration:300,easing:gt},!0)),o.run(1)})),r=!0)},o(t){o||(o=ot(e,$t,{duration:300,easing:gt},!1)),o.run(0),r=!1},d(t){t&&x(e),i&&i.d(),s&&s.d(),t&&o&&o.end()}}}function vt(t){let e,n,o,r=t[4]&&bt(t);return{c(){e=C("div"),r&&r.c(),n=_(),o=k(t[2]),A(e,"class","hyperfov-link-content svelte-1edsy5l")},m(t,i){b(t,e,i),r&&r.m(e,null),$(e,n),$(e,o)},p(t,i){t[4]?r?r.p(t,i):(r=bt(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),4&i&&S(o,t[2])},d(t){t&&x(e),r&&r.d()}}}function bt(t){let e,n;return{c(){e=C("div"),n=k(t[4]),A(e,"class","hyperfov-link-title svelte-1edsy5l")},m(t,o){b(t,e,o),$(e,n)},p(t,e){16&e&&S(n,t[4])},d(t){t&&x(e)}}}function xt(t){let e,n;return{c(){e=C("img"),A(e,"class","hyperfov-link-image svelte-1edsy5l"),u(e.src,n=t[3])||A(e,"src",n),A(e,"alt",t[4]),I(e,"left",t[0])},m(t,n){b(t,e,n)},p(t,o){8&o&&!u(e.src,n=t[3])&&A(e,"src",n),16&o&&A(e,"alt",t[4]),1&o&&I(e,"left",t[0])},d(t){t&&x(e)}}}function Ct(t){let e,n;return{c(){e=C("div"),n=k(t[4]),A(e,"class","hyperfov-link-title svelte-1edsy5l")},m(t,o){b(t,e,o),$(e,n)},p(t,e){16&e&&S(n,t[4])},d(t){t&&x(e)}}}function kt(t){let e,n,o;return{c(){e=C("span"),A(e,"class","hyperfov-loading svelte-1edsy5l")},m(t,n){b(t,e,n),o=!0},p(t,e){},i(t){o||(J((()=>{n||(n=ot(e,$t,{duration:300,easing:gt},!0)),n.run(1)})),o=!0)},o(t){n||(n=ot(e,$t,{duration:300,easing:gt},!1)),n.run(0),o=!1},d(t){t&&x(e),t&&n&&n.end()}}}function _t(t){let e,n,o,r,i,s,l=(t[0]||t[1])&&wt(t),c=!t[0]&&t[4]&&Ct(t),u=(t[6]||null===t[6])&&kt();return{c(){l&&l.c(),e=_(),c&&c.c(),n=_(),o=C("div"),u&&u.c(),r=_(),i=k(t[5]),A(o,"class","hyperfov-link-url svelte-1edsy5l")},m(t,a){l&&l.m(t,a),b(t,e,a),c&&c.m(t,a),b(t,n,a),b(t,o,a),u&&u.m(o,null),$(o,r),$(o,i),s=!0},p(t,[a]){t[0]||t[1]?l?(l.p(t,a),3&a&&tt(l,1)):(l=wt(t),l.c(),tt(l,1),l.m(e.parentNode,e)):l&&(Q(),et(l,1,1,(()=>{l=null})),V()),!t[0]&&t[4]?c?c.p(t,a):(c=Ct(t),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null),t[6]||null===t[6]?u?(u.p(t,a),64&a&&tt(u,1)):(u=kt(),u.c(),tt(u,1),u.m(o,r)):u&&(Q(),et(u,1,1,(()=>{u=null})),V()),(!s||32&a)&&S(i,t[5])},i(t){s||(tt(l),tt(u),s=!0)},o(t){et(l),et(u),s=!1},d(t){l&&l.d(t),t&&x(e),c&&c.d(t),t&&x(n),t&&x(o),u&&u.d()}}}function At(t,e,n){let{showContent:o}=e,{showImg:r}=e,{content:i}=e,{imgSrc:s}=e,{title:l}=e,{href:c}=e,{fetching:u}=e;return t.$$set=t=>{"showContent"in t&&n(0,o=t.showContent),"showImg"in t&&n(1,r=t.showImg),"content"in t&&n(2,i=t.content),"imgSrc"in t&&n(3,s=t.imgSrc),"title"in t&&n(4,l=t.title),"href"in t&&n(5,c=t.href),"fetching"in t&&n(6,u=t.fetching)},[o,r,i,s,l,c,u]}class St extends at{constructor(t){super(),ct(this,t,At,_t,l,{showContent:0,showImg:1,content:2,imgSrc:3,title:4,href:5,fetching:6},yt)}}function Et(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t);return e<0?void 0:e}function It(t){if(t>=0&&t<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]}var Nt={atob:function(t){if((t=(t=`${t}`).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let e="",n=0,o=0;for(let r=0;r<t.length;r++)n<<=6,n|=Et(t[r]),o+=6,24===o&&(e+=String.fromCharCode((16711680&n)>>16),e+=String.fromCharCode((65280&n)>>8),e+=String.fromCharCode(255&n),n=o=0);return 12===o?(n>>=4,e+=String.fromCharCode(n)):18===o&&(n>>=2,e+=String.fromCharCode((65280&n)>>8),e+=String.fromCharCode(255&n)),e},btoa:function(t){let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return null;let n="";for(e=0;e<t.length;e+=3){const o=[void 0,void 0,void 0,void 0];o[0]=t.charCodeAt(e)>>2,o[1]=(3&t.charCodeAt(e))<<4,t.length>e+1&&(o[1]|=t.charCodeAt(e+1)>>4,o[2]=(15&t.charCodeAt(e+1))<<2),t.length>e+2&&(o[2]|=t.charCodeAt(e+2)>>6,o[3]=63&t.charCodeAt(e+2));for(let t=0;t<o.length;t++)void 0===o[t]?n+="=":n+=It(o[t])}return n}};const Ot=t=>{const e=(t=>{const e=new Uint16Array(t.length);for(let n=0;n<e.length;n++)e[n]=t.charCodeAt(n);const n=new Uint8Array(e.buffer);let o="";for(let t=0;t<n.byteLength;t++)o+=String.fromCharCode(n[t]);return o})(t);return Nt.btoa(e)},Pt=t=>(t=>{const e=new Uint8Array(t.length);for(let n=0;n<e.length;n++)e[n]=t.charCodeAt(n);const n=new Uint16Array(e.buffer);let o="";for(let t=0;t<n.length;t++)o+=String.fromCharCode(n[t]);return o})(Nt.atob(t));function Lt(t){let e,n;return e=new St({props:{showContent:t[9],showImg:t[8],content:t[4],title:t[7],href:t[0],imgSrc:t[5],fetching:"true"===t[3]}}),{c(){rt(e.$$.fragment)},m(t,o){it(e,t,o),n=!0},p(t,n){const o={};512&n&&(o.showContent=t[9]),256&n&&(o.showImg=t[8]),16&n&&(o.content=t[4]),128&n&&(o.title=t[7]),1&n&&(o.href=t[0]),32&n&&(o.imgSrc=t[5]),8&n&&(o.fetching="true"===t[3]),e.$set(o)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Rt(t){let n,o;return n=new pt({props:{href:t[0],showContent:t[9],showImg:t[8],eltPos:t[6],followCursor:"true"===t[2],id:t[1]+"-sub",$$slots:{default:[Lt]},$$scope:{ctx:t}}}),{c(){rt(n.$$.fragment),this.c=e},m(t,e){it(n,t,e),o=!0},p(t,[e]){const o={};1&e&&(o.href=t[0]),512&e&&(o.showContent=t[9]),256&e&&(o.showImg=t[8]),64&e&&(o.eltPos=t[6]),4&e&&(o.followCursor="true"===t[2]),2&e&&(o.id=t[1]+"-sub"),5049&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(tt(n.$$.fragment,t),o=!0)},o(t){et(n.$$.fragment,t),o=!1},d(t){st(n,t)}}}function Tt(t,e,n){let o,{href:r}=e,{id:i}=e,{data:s}=e,{position:l}=e,{followcursor:c}=e,{fetching:u}=e,a=null,d=null,f=null,h=!1,p=!1;return t.$$set=t=>{"href"in t&&n(0,r=t.href),"id"in t&&n(1,i=t.id),"data"in t&&n(10,s=t.data),"position"in t&&n(11,l=t.position),"followcursor"in t&&n(2,c=t.followcursor),"fetching"in t&&n(3,u=t.fetching)},t.$$.update=()=>{if(2048&t.$$.dirty&&l)try{n(6,o=JSON.parse(Pt(l)))}catch{n(6,o=null)}if(1024&t.$$.dirty&&s)try{const t=JSON.parse(Pt(s));n(4,a=t.description),n(7,d=t.title),n(5,f=t.image)}catch{n(4,a=null),n(7,d=null),n(5,f=null)}48&t.$$.dirty&&(n(9,p=null!=a),n(8,h=null!=f))},[r,i,c,u,a,f,o,d,h,p,s,l]}class jt extends ut{constructor(t){super(),ct(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},Tt,Rt,l,{href:0,id:1,data:10,position:11,followcursor:2,fetching:3},null),t&&(t.target&&b(t.target,this,t.anchor),t.props&&(this.$set(t.props),Y()))}static get observedAttributes(){return["href","id","data","position","followcursor","fetching"]}get href(){return this.$$.ctx[0]}set href(t){this.$$set({href:t}),Y()}get id(){return this.$$.ctx[1]}set id(t){this.$$set({id:t}),Y()}get data(){return this.$$.ctx[10]}set data(t){this.$$set({data:t}),Y()}get position(){return this.$$.ctx[11]}set position(t){this.$$set({position:t}),Y()}get followcursor(){return this.$$.ctx[2]}set followcursor(t){this.$$set({followcursor:t}),Y()}get fetching(){return this.$$.ctx[3]}set fetching(t){this.$$set({fetching:t}),Y()}}if(customElements.define("link-preview",jt),"undefined"!=typeof navigator&&"ReactNative"===navigator.product&&"undefined"==typeof crypto)throw new Error("React Native does not have a built-in secure random generator. If you don’t need unpredictable IDs use `nanoid/non-secure`. For secure IDs, import `react-native-get-random-values` before Nano ID.");if("undefined"!=typeof msCrypto&&"undefined"==typeof crypto)throw new Error("Import file with `if (!window.crypto) window.crypto = window.msCrypto` before importing Nano ID to fix IE 11 support");if("undefined"==typeof crypto)throw new Error("Your browser does not have secure random generator. If you don’t need unpredictable IDs, you can use nanoid/non-secure.");const Mt=((t,e,n)=>{let o=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*o*e/t.length);return()=>{let i="";for(;;){let s=n(r),l=r;for(;l--;)if(i+=t[s[l]&o]||"",i.length===e)return i}}})("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUWXYZ",10,(t=>crypto.getRandomValues(new Uint8Array(t))));const Ft=()=>document.getElementsByTagName("a");window.setPagePreviews=async(t={})=>{const e=(t={workerUrl:"",styles:null,fetchOn:"hover",getLinks:Ft,assignStyles:()=>null,assignPositions:()=>"below",...t}).getLinks();for(let n of e){const e=`${Ot(n.href)}-preview-data`;localStorage.setItem(e,null);const o=Mt(),r=t.assignPositions(n)||"below",i=document.createElement("link-preview");i.setAttribute("id",o),i.setAttribute("href",n.href),i.setAttribute("followCursor","cursor"===r),document.body.appendChild(i);const s=document.getElementById(o);let l=!1;const c=async()=>{const o=localStorage.getItem(e);if("null"!==o||l)"null"!==o&&s.setAttribute("data",Ot(o));else{l=!0,s.setAttribute("fetching",!0);const o=new URL(t.workerUrl);o.searchParams.append("page",n.href);const r=await fetch(o);if(r.ok){const t=await r.json();s.setAttribute("data",Ot(JSON.stringify(t))),localStorage.setItem(e,JSON.stringify(t))}s.setAttribute("fetching",!1),l=!1}};"load"===t.fetchOn&&c(),n.addEventListener("mouseover",(()=>{"hover"===t.fetchOn&&c();const e=n.getBoundingClientRect();s.setAttribute("position",Ot(JSON.stringify(e)))})),"cursor"===r&&n.addEventListener("mousemove",(t=>{const e={x:t.clientX,y:t.clientY};s.setAttribute("position",Ot(JSON.stringify(e)))})),n.addEventListener("mouseout",(()=>{s.setAttribute("position",null)}));const u=t.assignStyles(n)||t.styles;if(u){const t=[];for(const e of u?.rules)-1!==e.selectorText.indexOf(".hyperfov")&&t.push(e.cssText);const e=[...t].map((t=>`#${o}-sub * ${t}\n#${o}-sub > ${t}`)),n=document.createElement("style");n.innerHTML=e.join("\n"),s.shadowRoot.appendChild(n)}}},t.Interior=St,t.LinkPreview=jt,t.Wrapper=pt,Object.defineProperty(t,"__esModule",{value:!0})}));
