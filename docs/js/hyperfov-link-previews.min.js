!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).HyperfovLinkPreviews={})}(this,(function(t){"use strict";function e(){}const n=t=>t;function o(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(o)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c;function a(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function u(t){return 0===Object.keys(t).length}function d(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}const f="undefined"!=typeof window;let p=f?()=>window.performance.now():()=>Date.now(),h=f?t=>requestAnimationFrame(t):e;const m=new Set;function g(t){m.forEach((e=>{e.c(t)||(m.delete(e),e.f())})),0!==m.size&&h(g)}function $(t,e){t.appendChild(e)}function w(t,e,n){const o=y(t);if(!o.getElementById(e)){const t=k("style");t.id=e,t.textContent=n,v(o,t)}}function y(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function v(t,e){$(t.head||t,e)}function b(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function k(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function _(){return C(" ")}function E(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function I(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function A(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let P;function N(){if(void 0===P){P=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){P=!0}}return P}function D(t,e,n){t.classList[n?"add":"remove"](e)}function R(t){const e={};for(const n of t)e[n.name]=n.value;return e}const T=new Set;let L,O=0;function M(t,e,n,o,i,r,s,l=0){const c=16.666/o;let a="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*r(t);a+=100*t+`%{${s(o,1-o)}}\n`}const u=a+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,f=y(t);T.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=function(t){const e=k("style");return v(y(t),e),e}(t).sheet),h=f.__svelte_rules||(f.__svelte_rules={});h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${o}ms linear ${i}ms 1 both`,O+=1,d}function j(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),O-=i,O||h((()=>{O||(T.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),T.clear())})))}function z(t){L=t}function F(t){(function(){if(!L)throw new Error("Function called outside component initialization");return L})().$$.on_mount.push(t)}const B=[],H=[],W=[],Y=[],X=Promise.resolve();let U=!1;function q(t){W.push(t)}let J=!1;const Z=new Set;function G(){if(!J){J=!0;do{for(let t=0;t<B.length;t+=1){const e=B[t];z(e),K(e.$$)}for(z(null),B.length=0;H.length;)H.pop()();for(let t=0;t<W.length;t+=1){const e=W[t];Z.has(e)||(Z.add(e),e())}W.length=0}while(B.length);for(;Y.length;)Y.pop()();U=!1,J=!1,Z.clear()}}function K(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}let Q;function V(t,e,n){t.dispatchEvent(function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(`${e?"intro":"outro"}${n}`))}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function ot(){et.r||r(et.c),et=et.p}function it(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function rt(t,e,n,o){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push((()=>{tt.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const st={duration:0};function lt(t,o,i,l){let c=o(t,i),a=l?0:1,u=null,d=null,f=null;function $(){f&&j(t,f)}function w(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(o){const{delay:i=0,duration:s=300,easing:l=n,tick:y=e,css:v}=c||st,b={start:p()+i,b:o};o||(b.group=et,et.r+=1),u||d?d=b:(v&&($(),f=M(t,a,o,s,i,l,v)),o&&y(0,1),u=w(b,s),q((()=>V(t,o,"start"))),function(t){let e;0===m.size&&h(g),new Promise((n=>{m.add(e={c:t,f:n})}))}((e=>{if(d&&e>d.start&&(u=w(d,s),d=null,V(t,u.b,"start"),v&&($(),f=M(t,a,u.b,u.duration,0,l,c.css))),u)if(e>=u.end)y(a=u.b,1-a),V(t,u.b,"end"),d||(u.b?$():--u.group.r||r(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;a=u.a+u.d*l(t/u.duration),y(a,1-a)}return!(!u&&!d)})))}return{run(t){s(c)?(Q||(Q=Promise.resolve(),Q.then((()=>{Q=null}))),Q).then((()=>{c=c(),y(t)})):y(t)},end(){$(),u=d=null}}}function ct(t){t&&t.c()}function at(t,e,n,i){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(e,n),i||q((()=>{const e=c.map(o).filter(s);a?a.push(...e):r(e),t.$$.on_mount=[]})),u.forEach(q)}function ut(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,e){-1===t.$$.dirty[0]&&(B.push(t),U||(U=!0,X.then(G)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ft(t,n,o,s,l,c,a,u=[-1]){const d=L;z(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:l,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(f.root);let p=!1;if(f.ctx=o?o(t,n.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&dt(t,e)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(x)}else f.fragment&&f.fragment.c();n.intro&&it(t.$$.fragment),at(t,n.target,n.anchor,n.customElement),G()}z(d)}let pt;"function"==typeof HTMLElement&&(pt=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(o).filter(s);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){ut(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!u(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class ht{$destroy(){ut(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!u(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function mt(t){w(t,"svelte-nmotuc",".preview.svelte-nmotuc{z-index:1000;position:absolute;transition:opacity 0.5s;visibility:hidden;opacity:0}.preview.visible.svelte-nmotuc{opacity:1;visibility:visible}.hyperfov-preview-element-wrapper.svelte-nmotuc{font-family:sans-serif;color:black;max-width:100%;text-decoration:none;padding:10px;margin-top:5px;font-weight:normal;font-style:normal;font-size:14px;border:1px solid black;background-color:white}.preview-wrapper.svelte-nmotuc{position:absolute}")}function gt(t){let e,n,o,i,l,c,a,u;const f=t[17].default,p=function(t,e,n,o){if(t){const i=d(t,e,n,o);return t[0](i)}}(f,t,t[16],null);return{c(){e=k("span"),n=_(),o=k("div"),i=k("div"),p&&p.c(),I(e,"class","preview-wrapper svelte-nmotuc"),A(e,"top",t[0].y+"px"),A(e,"left",t[0].x+"px"),A(e,"height",t[0].height+"px"),A(e,"width",t[0].width+"px"),I(i,"class","hyperfov-preview-element-wrapper svelte-nmotuc"),q((()=>t[19].call(i))),I(o,"class","preview svelte-nmotuc"),A(o,"top",t[5]+"px"),A(o,"left",t[6]+"px"),A(o,"height",t[7]+"px"),A(o,"width",t[8]+"px"),I(o,"id",t[1]),D(o,"visible",t[4])},m(r,d){b(r,e,d),t[18](e),b(r,n,d),b(r,o,d),$(o,i),p&&p.m(i,null),l=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=k("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=N();let i;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=E(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=E(n.contentWindow,"resize",e)}),$(t,n),()=>{(o||i&&n.contentWindow)&&i(),x(n)}}(i,t[19].bind(i)),c=!0,a||(u=[E(e,"mouseover",t[11]),E(e,"mousemove",(function(){s("cursor"===t[2]?t[10]:null)&&("cursor"===t[2]?t[10]:null).apply(this,arguments)})),E(e,"focus",t[11]),E(e,"mouseout",t[12]),E(e,"blur",t[12])],a=!0)},p(n,[i]){t=n,(!c||1&i)&&A(e,"top",t[0].y+"px"),(!c||1&i)&&A(e,"left",t[0].x+"px"),(!c||1&i)&&A(e,"height",t[0].height+"px"),(!c||1&i)&&A(e,"width",t[0].width+"px"),p&&p.p&&(!c||65536&i)&&function(t,e,n,o,i,r){if(i){const s=d(e,n,o,r);t.p(s,i)}}(p,f,t,t[16],c?function(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}(f,t[16],i,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[16]),null),(!c||32&i)&&A(o,"top",t[5]+"px"),(!c||64&i)&&A(o,"left",t[6]+"px"),(!c||128&i)&&A(o,"height",t[7]+"px"),(!c||256&i)&&A(o,"width",t[8]+"px"),(!c||2&i)&&I(o,"id",t[1]),16&i&&D(o,"visible",t[4])},i(t){c||(it(p,t),c=!0)},o(t){rt(p,t),c=!1},d(i){i&&x(e),t[18](null),i&&x(n),i&&x(o),p&&p.d(i),l(),a=!1,r(u)}}}function $t(t,e,n){let o,i,r,s,{$$slots:l={},$$scope:c}=e,{showContent:a}=e,{showImg:u}=e,{eltPos:d}=e,{id:f}=e,{position:p}=e,{fetchData:h}=e,m=!1,g=a?172:60,$=a&&u?400:272,w=g;const y=t=>{if(o)n(5,i=o.y+20),n(6,r=o.x+20);else if(s){const e=s.getBoundingClientRect(),o=$+40,l=t+40,c=window.innerWidth,a=window.innerHeight;c-e.x<o?n(6,r=c-o+window.scrollX):n(6,r=e.x+window.scrollX),a-(e.y+e.height)<l?n(5,i=e.y-t-20+window.scrollY):n(5,i=e.y+e.height+window.scrollY)}};return t.$$set=t=>{"showContent"in t&&n(13,a=t.showContent),"showImg"in t&&n(14,u=t.showImg),"eltPos"in t&&n(0,d=t.eltPos),"id"in t&&n(1,f=t.id),"position"in t&&n(2,p=t.position),"fetchData"in t&&n(15,h=t.fetchData),"$$scope"in t&&n(16,c=t.$$scope)},t.$$.update=()=>{24576&t.$$.dirty&&(n(7,g=a?172:60),n(8,$=a&&u?400:272)),8&t.$$.dirty&&y(w)},[d,f,p,w,m,i,r,g,$,s,t=>{o={x:t.clientX+window.scrollX,y:t.clientY+window.scrollY},y(w)},()=>{h&&h(),y(w),n(4,m=!0)},()=>{n(4,m=!1)},a,u,h,c,l,function(t){H[t?"unshift":"push"]((()=>{s=t,n(9,s)}))},function(){w=this.clientHeight,n(3,w)}]}class wt extends ht{constructor(t){super(),ft(this,t,$t,gt,l,{showContent:13,showImg:14,eltPos:0,id:1,position:2,fetchData:15},mt)}}function yt(t){return t*t*t}function vt(t){const e=t-1;return e*e*e+1}function bt(t,{delay:e=0,duration:n=400,easing:o=vt}={}){const i=getComputedStyle(t),r=+i.opacity,s=parseFloat(i.height),l=parseFloat(i.paddingTop),c=parseFloat(i.paddingBottom),a=parseFloat(i.marginTop),u=parseFloat(i.marginBottom),d=parseFloat(i.borderTopWidth),f=parseFloat(i.borderBottomWidth);return{delay:e,duration:n,easing:o,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*r};height: ${t*s}px;padding-top: ${t*l}px;padding-bottom: ${t*c}px;margin-top: ${t*a}px;margin-bottom: ${t*u}px;border-top-width: ${t*d}px;border-bottom-width: ${t*f}px;`}}function xt(t){w(t,"svelte-1edsy5l",'.hyperfov-link-title.svelte-1edsy5l{font-weight:bold}.hyperfov-link-content-wrapper.svelte-1edsy5l{display:flex;margin-bottom:15px}.hyperfov-link-image.svelte-1edsy5l{height:120px;object-fit:cover;object-position:center center;width:100%;min-width:150px}.hyperfov-link-image.left.svelte-1edsy5l{padding-left:10px}.hyperfov-link-url.svelte-1edsy5l{font-size:12px;color:grey;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.hyperfov-link-content.svelte-1edsy5l{display:inline-block;position:relative;height:120px;overflow:hidden;background-color:white}.hyperfov-link-content.svelte-1edsy5l::after{content:"";position:absolute;bottom:0;left:0;width:275px;height:50px;background-image:linear-gradient(#ffffff00, #ffffff)}.hyperfov-loading.svelte-1edsy5l{width:5px;height:5px;background-color:black;border-radius:50%;animation:svelte-1edsy5l-fade 1s ease infinite;margin-bottom:2px;display:inline-block}@keyframes svelte-1edsy5l-fade{from{opacity:1}to{opacity:0.1}}')}function kt(t){let e,n,o,i,r=t[0]&&Ct(t),s=t[1]&&Et(t);return{c(){e=k("div"),r&&r.c(),n=_(),s&&s.c(),I(e,"class","hyperfov-link-content-wrapper svelte-1edsy5l")},m(t,o){b(t,e,o),r&&r.m(e,null),$(e,n),s&&s.m(e,null),i=!0},p(o,i){(t=o)[0]?r?r.p(t,i):(r=Ct(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),t[1]?s?s.p(t,i):(s=Et(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(t){i||(q((()=>{o||(o=lt(e,bt,{duration:300,easing:yt},!0)),o.run(1)})),i=!0)},o(t){o||(o=lt(e,bt,{duration:300,easing:yt},!1)),o.run(0),i=!1},d(t){t&&x(e),r&&r.d(),s&&s.d(),t&&o&&o.end()}}}function Ct(t){let e,n,o,i=t[4]&&_t(t);return{c(){e=k("div"),i&&i.c(),n=_(),o=C(t[2]),I(e,"class","hyperfov-link-content svelte-1edsy5l")},m(t,r){b(t,e,r),i&&i.m(e,null),$(e,n),$(e,o)},p(t,r){t[4]?i?i.p(t,r):(i=_t(t),i.c(),i.m(e,n)):i&&(i.d(1),i=null),4&r&&S(o,t[2])},d(t){t&&x(e),i&&i.d()}}}function _t(t){let e,n;return{c(){e=k("div"),n=C(t[4]),I(e,"class","hyperfov-link-title svelte-1edsy5l")},m(t,o){b(t,e,o),$(e,n)},p(t,e){16&e&&S(n,t[4])},d(t){t&&x(e)}}}function Et(t){let e,n;return{c(){e=k("img"),I(e,"class","hyperfov-link-image svelte-1edsy5l"),a(e.src,n=t[3])||I(e,"src",n),I(e,"alt",t[4]),D(e,"left",t[0])},m(t,n){b(t,e,n)},p(t,o){8&o&&!a(e.src,n=t[3])&&I(e,"src",n),16&o&&I(e,"alt",t[4]),1&o&&D(e,"left",t[0])},d(t){t&&x(e)}}}function It(t){let e,n;return{c(){e=k("div"),n=C(t[4]),I(e,"class","hyperfov-link-title svelte-1edsy5l")},m(t,o){b(t,e,o),$(e,n)},p(t,e){16&e&&S(n,t[4])},d(t){t&&x(e)}}}function St(t){let e,n,o;return{c(){e=k("span"),I(e,"class","hyperfov-loading svelte-1edsy5l")},m(t,n){b(t,e,n),o=!0},p(t,e){},i(t){o||(q((()=>{n||(n=lt(e,bt,{duration:300,easing:yt},!0)),n.run(1)})),o=!0)},o(t){n||(n=lt(e,bt,{duration:300,easing:yt},!1)),n.run(0),o=!1},d(t){t&&x(e),t&&n&&n.end()}}}function At(t){let e,n,o,i,r,s,l=(t[0]||t[1])&&kt(t),c=!t[0]&&t[4]&&It(t),a=(t[6]||null===t[6])&&St();return{c(){l&&l.c(),e=_(),c&&c.c(),n=_(),o=k("div"),a&&a.c(),i=_(),r=C(t[5]),I(o,"class","hyperfov-link-url svelte-1edsy5l")},m(t,u){l&&l.m(t,u),b(t,e,u),c&&c.m(t,u),b(t,n,u),b(t,o,u),a&&a.m(o,null),$(o,i),$(o,r),s=!0},p(t,[u]){t[0]||t[1]?l?(l.p(t,u),3&u&&it(l,1)):(l=kt(t),l.c(),it(l,1),l.m(e.parentNode,e)):l&&(nt(),rt(l,1,1,(()=>{l=null})),ot()),!t[0]&&t[4]?c?c.p(t,u):(c=It(t),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null),t[6]||null===t[6]?a?(a.p(t,u),64&u&&it(a,1)):(a=St(),a.c(),it(a,1),a.m(o,i)):a&&(nt(),rt(a,1,1,(()=>{a=null})),ot()),(!s||32&u)&&S(r,t[5])},i(t){s||(it(l),it(a),s=!0)},o(t){rt(l),rt(a),s=!1},d(t){l&&l.d(t),t&&x(e),c&&c.d(t),t&&x(n),t&&x(o),a&&a.d()}}}function Pt(t,e,n){let{showContent:o}=e,{showImg:i}=e,{content:r}=e,{imgSrc:s}=e,{title:l}=e,{href:c}=e,{fetching:a}=e;return t.$$set=t=>{"showContent"in t&&n(0,o=t.showContent),"showImg"in t&&n(1,i=t.showImg),"content"in t&&n(2,r=t.content),"imgSrc"in t&&n(3,s=t.imgSrc),"title"in t&&n(4,l=t.title),"href"in t&&n(5,c=t.href),"fetching"in t&&n(6,a=t.fetching)},[o,i,r,s,l,c,a]}class Nt extends ht{constructor(t){super(),ft(this,t,Pt,At,l,{showContent:0,showImg:1,content:2,imgSrc:3,title:4,href:5,fetching:6},xt)}}function Dt(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t);return e<0?void 0:e}function Rt(t){if(t>=0&&t<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]}var Tt={atob:function(t){if((t=(t=`${t}`).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let e="",n=0,o=0;for(let i=0;i<t.length;i++)n<<=6,n|=Dt(t[i]),o+=6,24===o&&(e+=String.fromCharCode((16711680&n)>>16),e+=String.fromCharCode((65280&n)>>8),e+=String.fromCharCode(255&n),n=o=0);return 12===o?(n>>=4,e+=String.fromCharCode(n)):18===o&&(n>>=2,e+=String.fromCharCode((65280&n)>>8),e+=String.fromCharCode(255&n)),e},btoa:function(t){let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return null;let n="";for(e=0;e<t.length;e+=3){const o=[void 0,void 0,void 0,void 0];o[0]=t.charCodeAt(e)>>2,o[1]=(3&t.charCodeAt(e))<<4,t.length>e+1&&(o[1]|=t.charCodeAt(e+1)>>4,o[2]=(15&t.charCodeAt(e+1))<<2),t.length>e+2&&(o[2]|=t.charCodeAt(e+2)>>6,o[3]=63&t.charCodeAt(e+2));for(let t=0;t<o.length;t++)void 0===o[t]?n+="=":n+=Rt(o[t])}return n}};function Lt(t){let e,n;return e=new Nt({props:{showContent:t[8],showImg:t[7],content:t[4],title:t[6],href:t[0],imgSrc:t[5],fetching:t[9]}}),{c(){ct(e.$$.fragment)},m(t,o){at(e,t,o),n=!0},p(t,n){const o={};256&n&&(o.showContent=t[8]),128&n&&(o.showImg=t[7]),16&n&&(o.content=t[4]),64&n&&(o.title=t[6]),1&n&&(o.href=t[0]),32&n&&(o.imgSrc=t[5]),512&n&&(o.fetching=t[9]),e.$set(o)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Ot(t){let n,o;return n=new wt({props:{href:t[0],showContent:t[8],showImg:t[7],eltPos:t[10],position:t[2],fetchData:"hover"===t[3]?t[11]:null,id:t[1]+"-sub",$$slots:{default:[Lt]},$$scope:{ctx:t}}}),{c(){ct(n.$$.fragment),this.c=e},m(t,e){at(n,t,e),o=!0},p(t,[e]){const o={};1&e&&(o.href=t[0]),256&e&&(o.showContent=t[8]),128&e&&(o.showImg=t[7]),4&e&&(o.position=t[2]),8&e&&(o.fetchData="hover"===t[3]?t[11]:null),2&e&&(o.id=t[1]+"-sub"),17393&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(it(n.$$.fragment,t),o=!0)},o(t){rt(n.$$.fragment,t),o=!1},d(t){ut(n,t)}}}function Mt(t,e,n){let o,i,r,{eltpos:s}=e,{href:l}=e,{id:c}=e,{worker:a}=e,{position:u}=e,{fetchon:d}=e,f=JSON.parse(Tt.atob(s)),p=!1,h=!1,m=null;const g=async()=>{if(null===m)try{n(9,m=!0);const t=new URL(Tt.atob(a));t.searchParams.append("page",l);const e=await fetch(t);if(e.ok){const t=await e.json();n(4,o=t.description),n(6,i=t.title),n(5,r=t.image)}n(9,m=!1)}catch(t){}};return F((()=>{"load"===d&&g()})),t.$$set=t=>{"eltpos"in t&&n(12,s=t.eltpos),"href"in t&&n(0,l=t.href),"id"in t&&n(1,c=t.id),"worker"in t&&n(13,a=t.worker),"position"in t&&n(2,u=t.position),"fetchon"in t&&n(3,d=t.fetchon)},t.$$.update=()=>{48&t.$$.dirty&&(n(8,h=o&&"null"!==o),n(7,p=r&&"null"!==r))},[l,c,u,d,o,r,i,p,h,m,f,g,s,a]}class jt extends pt{constructor(t){super(),ft(this,{target:this.shadowRoot,props:R(this.attributes),customElement:!0},Mt,Ot,l,{eltpos:12,href:0,id:1,worker:13,position:2,fetchon:3},null),t&&(t.target&&b(t.target,this,t.anchor),t.props&&(this.$set(t.props),G()))}static get observedAttributes(){return["eltpos","href","id","worker","position","fetchon"]}get eltpos(){return this.$$.ctx[12]}set eltpos(t){this.$$set({eltpos:t}),G()}get href(){return this.$$.ctx[0]}set href(t){this.$$set({href:t}),G()}get id(){return this.$$.ctx[1]}set id(t){this.$$set({id:t}),G()}get worker(){return this.$$.ctx[13]}set worker(t){this.$$set({worker:t}),G()}get position(){return this.$$.ctx[2]}set position(t){this.$$set({position:t}),G()}get fetchon(){return this.$$.ctx[3]}set fetchon(t){this.$$set({fetchon:t}),G()}}if(customElements.define("link-preview",jt),"undefined"!=typeof navigator&&"ReactNative"===navigator.product&&"undefined"==typeof crypto)throw new Error("React Native does not have a built-in secure random generator. If you don’t need unpredictable IDs use `nanoid/non-secure`. For secure IDs, import `react-native-get-random-values` before Nano ID.");if("undefined"!=typeof msCrypto&&"undefined"==typeof crypto)throw new Error("Import file with `if (!window.crypto) window.crypto = window.msCrypto` before importing Nano ID to fix IE 11 support");if("undefined"==typeof crypto)throw new Error("Your browser does not have secure random generator. If you don’t need unpredictable IDs, you can use nanoid/non-secure.");const zt=((t,e,n)=>{let o=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*o*e/t.length);return()=>{let r="";for(;;){let s=n(i),l=i;for(;l--;)if(r+=t[s[l]&o]||"",r.length===e)return r}}})("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUWXYZ",10,(t=>crypto.getRandomValues(new Uint8Array(t))));const Ft=()=>document.getElementsByTagName("a");window.setPagePreviews=function(t={}){const e=[...(t={workerUrl:"",styles:null,fetchOn:"hover",getLinks:Ft,assignStyles:()=>null,assignPositions:()=>"below",...t}).getLinks()];for(const n of e){const e=n.getBoundingClientRect();e.x+=window.scrollX,e.y+=window.scrollY;const o=zt(),i=t.assignPositions(n)||"below";n.innerHTML+=`<link-preview id="${o}" eltpos="${Tt.btoa(JSON.stringify(e))}" position="${i}" worker=${Tt.btoa(t.workerUrl)} href="${n.href}" fetchon="${t.fetchOn}" ></link-preview>`;const r=t.assignStyles(n)||t.styles;if(r){const t=[];for(const e of r?.rules)-1!==e.selectorText.indexOf(".hyperfov")&&t.push(e.cssText);const e=[...t].map((t=>`#${o}-sub * ${t}\n#${o}-sub > ${t}`)),n=document.getElementById(o),i=document.createElement("style");i.innerHTML=e.join("\n"),n.shadowRoot.appendChild(i)}}},t.Interior=Nt,t.LinkPreview=jt,t.Wrapper=wt,Object.defineProperty(t,"__esModule",{value:!0})}));
